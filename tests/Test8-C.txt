.extern char
.extern charReady
.global getChar
.global getLine
.section .text
#returns one cahracter
getChar:
push %r2
loop:
ld charReady, %r1
beq %r1, %r0, loop
st %r0, charReady
ld char, %r1
ld $0xFF, %r2
and %r2, %r1
pop %r2
ret

#writes one line from input into address space starting from address in r1
getLine:
push %r1
push %r2
push %r3
push %r4

ld %r1, %r2 #current address
ld $10, %r3 #last character
ld $1, %r4 #address increment
loop2:
call getChar
st %r1, [%r2]
add %r4, %r2
bne %r1, %r3, loop2

st %r0, [%r2]
pop %r4
pop %r3
pop %r2
pop %r1
ret